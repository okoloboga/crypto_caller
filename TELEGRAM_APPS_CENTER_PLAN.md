# –ü–ª–∞–Ω —Å–æ–±–ª—é–¥–µ–Ω–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π Telegram Apps Center

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2024  
**–¶–µ–ª—å:** –ü—Ä–∏–≤–µ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ RUBLE CALLER –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ –¥–ª—è –æ–¥–æ–±—Ä–µ–Ω–∏—è –≤ Telegram Apps Center

---

## üìã –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### ‚úÖ –ß—Ç–æ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
1. **Telegram Analytics SDK** - –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `frontend/src/index.js` (–≤–µ—Ä—Å–∏—è 1.3.13)
2. **Telegram WebApp SDK** - –ø–æ–¥–∫–ª—é—á–µ–Ω –≤ `frontend/public/index.html` —á–µ—Ä–µ–∑ script tag
3. **TON Connect** - –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
4. **Backend API** - —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### ‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ (—Ç—Ä–µ–±—É—é—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è):
1. **Telegram WebApp API –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è** - SDK –ø–æ–¥–∫–ª—é—á–µ–Ω, –Ω–æ –æ–±—ä–µ–∫—Ç `window.Telegram.WebApp` –Ω–∏–≥–¥–µ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
2. **–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è WebApp** - –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `WebApp.ready()` –∏ `WebApp.expand()`
3. **MainButton –∏ BackButton –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è** - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å Telegram UI
4. **Viewport –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è** - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ –≤—ã—Å–æ—Ç–µ —ç–∫—Ä–∞–Ω–∞ Telegram
5. **–°–æ–±—ã—Ç–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è** - Analytics –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω, –Ω–æ `trackEvent()` –Ω–∏–≥–¥–µ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
6. **Safe area insets –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è** - –Ω–µ—Ç —É—á–µ—Ç–∞ –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –∑–æ–Ω —ç–∫—Ä–∞–Ω–∞

---

## üéØ –ú–ò–ù–ò–ú–ê–õ–¨–ù–´–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø –î–õ–Ø –í–´–ü–û–õ–ù–ï–ù–ò–Ø

### 1. –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø TELEGRAM WEBAPP API

#### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ–ª–∂–µ–Ω –≤—ã–∑—ã–≤–∞—Ç—å—Å—è `WebApp.ready()`
- –î–æ–ª–∂–µ–Ω –≤—ã–∑—ã–≤–∞—Ç—å—Å—è `WebApp.expand()` –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ `window.Telegram` –∏ `window.Telegram.WebApp` –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –î–û —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:
- –°–æ–∑–¥–∞—Ç—å React hook `useTelegramWebApp` –≤ `frontend/src/hooks/useTelegramWebApp.js`
- Hook –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ–±—ä–µ–∫—Ç WebApp –∏ —Å—Ç–∞—Ç—É—Å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- Hook –¥–æ–ª–∂–µ–Ω –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –Ω–µ –≤ Telegram (fallback)

#### –¢–µ–∫—É—â–∞—è –æ—à–∏–±–∫–∞:
- –í `frontend/src/App.js` –∏ `frontend/src/pages/Dashboard.js` –Ω–µ—Ç –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ Telegram WebApp API
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –∑–∞–ø—É—Å–∫ –≤–Ω—É—Ç—Ä–∏ Telegram Mini App

---

### 2. –£–ü–†–ê–í–õ–ï–ù–ò–ï MAINBUTTON

#### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- MainButton –¥–æ–ª–∂–Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω —á–µ—Ä–µ–∑ i18n
- –ö–Ω–æ–ø–∫–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è/—Å–∫—Ä—ã–≤–∞—Ç—å—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–æ–≤ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏ –æ—á–∏—â–µ–Ω—ã

#### –ì–¥–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- **SubscriptionForm.js** - MainButton –¥–ª—è –¥–µ–π—Å—Ç–≤–∏—è "–û–ø–ª–∞—Ç–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É" (–≤–º–µ—Å—Ç–æ –æ–±—ã—á–Ω–æ–π –∫–Ω–æ–ø–∫–∏)
- **TaskForm.js** - MainButton –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏
- **PointsWidget.js** - MainButton –¥–ª—è —Å–±–æ—Ä–∞ —Ç–æ–∫–µ–Ω–æ–≤, –∫–æ–≥–¥–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª–Ω—ã–π

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:
- –°–æ–∑–¥–∞—Ç—å —Ö—É–∫ `useMainButton` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º MainButton
- –•—É–∫ –¥–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ (i18next)

#### –¢–µ–∫—É—â–∏–µ –æ—à–∏–±–∫–∏:
- –í `SubscriptionForm.js` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–±—ã—á–Ω–∞—è MUI Button –≤–º–µ—Å—Ç–æ MainButton
- –í `TaskForm.js` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –æ–±—ã—á–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –≤–º–µ—Å—Ç–æ MainButton
- –í `PointsWidget.js` –Ω–µ—Ç MainButton –¥–ª—è –¥–µ–π—Å—Ç–≤–∏—è —Å–±–æ—Ä–∞

---

### 3. –£–ü–†–ê–í–õ–ï–ù–ò–ï BACKBUTTON

#### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- BackButton –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–ª—è—Ç—å—Å—è –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–µ –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ
- –ü—Ä–∏ –∫–ª–∏–∫–µ –¥–æ–ª–∂–Ω–∞ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞–∑–∞–¥ –∏–ª–∏ –∑–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
- BackButton –¥–æ–ª–∂–Ω–∞ —Å–∫—Ä—ã–≤–∞—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ

#### –ì–¥–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- **Dashboard.js** - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å BackButton –∫–æ–≥–¥–∞ –æ—Ç–∫—Ä—ã—Ç `TaskForm` –∏–ª–∏ `SubscriptionForm`
- –ü—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –Ω–∞–∑–∞–¥ –∑–∞–∫—Ä—ã–≤–∞—Ç—å —Ñ–æ—Ä–º—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É —ç–∫—Ä–∞–Ω—É

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:
- –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è "—É—Ä–æ–≤–Ω—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏" —ç–∫—Ä–∞–Ω–æ–≤
- BackButton –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–∏ `currentTask !== null` –∏–ª–∏ `onSubscription === true`
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è —Ñ–æ—Ä–º —Å BackButton

#### –¢–µ–∫—É—â–∞—è –æ—à–∏–±–∫–∞:
- –ù–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è BackButton –≤–æ–æ–±—â–µ
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞–∑–∞–¥ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏ –≤ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

### 4. –û–ë–†–ê–ë–û–¢–ö–ê VIEWPORT

#### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—É—é –≤—ã—Å–æ—Ç—É viewport Telegram
- –í—ã—Å–æ—Ç–∞ –¥–æ–ª–∂–Ω–∞ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ (–æ—Ç–∫—Ä—ã—Ç–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã, –∏–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏)
- CSS –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `--tg-viewport-height` –¥–æ–ª–∂–Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—ã—Å–æ—Ç—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:
- –í —Ö—É–∫–µ `useTelegramWebApp` –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏–µ `viewportChanged`
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —á–µ—Ä–µ–∑ `document.documentElement.style.setProperty`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç—É –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö —á–µ—Ä–µ–∑ CSS –∏–ª–∏ inline —Å—Ç–∏–ª–∏

#### –¢–µ–∫—É—â–∞—è –æ—à–∏–±–∫–∞:
- –í `App.js` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `height: 100vh`, —á—Ç–æ –º–æ–∂–µ—Ç –Ω–µ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω–æ–π –≤—ã—Å–æ—Ç–æ–π –≤ Telegram
- –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏—è `viewportChanged`

---

### 5. SAFE AREA INSETS

#### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–æ–Ω—ã —ç–∫—Ä–∞–Ω–∞ (–≤—ã—Ä–µ–∑ –¥–ª—è –∫–∞–º–µ—Ä—ã, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä)
- CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è top –∏ bottom insets –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- –ö–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—Ç—å—Å—è —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:
- –ü–æ–ª—É—á–∞—Ç—å `WebApp.safeAreaInsets` –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `--tg-safe-area-top` –∏ `--tg-safe-area-bottom`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å padding –∏–ª–∏ margin –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö —á–µ—Ä–µ–∑ —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

#### –¢–µ–∫—É—â–∞—è –æ—à–∏–±–∫–∞:
- –í `Header.js` –∏ `Footer.js` –Ω–µ—Ç —É—á–µ—Ç–∞ safe area
- –ö–æ–Ω—Ç–µ–Ω—Ç –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—Ç—å—Å—è —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

---

### 6. –¢–†–ï–ö–ò–ù–ì –°–û–ë–´–¢–ò–ô –ê–ù–ê–õ–ò–¢–ò–ö–ò

#### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∫–ª—é—á–µ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ `telegramAnalytics.trackEvent()`
- –°–æ–±—ã—Ç–∏—è –¥–æ–ª–∂–Ω—ã –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:
1. **app_opened** - –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–≤ App.js –∏–ª–∏ Dashboard.js –ø—Ä–∏ mount)
2. **wallet_connected** - –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ TON –∫–æ—à–µ–ª—å–∫–∞ (–≤ useTonConnect.js)
3. **subscription_purchase_started** - –ø—Ä–∏ –Ω–∞—á–∞–ª–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–ø–ª–∞—Ç—ã –ø–æ–¥–ø–∏—Å–∫–∏ (–≤ SubscriptionForm.js, handleRegister)
4. **subscription_purchase_completed** - –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç–µ –ø–æ–¥–ø–∏—Å–∫–∏ (–ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏)
5. **task_created** - –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏ (–≤ TaskForm.js)
6. **task_deleted** - –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏ (–≤ Dashboard.js, handleDelete)
7. **tokens_claimed** - –ø—Ä–∏ —Å–±–æ—Ä–µ —Ç–æ–∫–µ–Ω–æ–≤ (–≤ PointsWidget.js, handleProgressBarClick)

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:
- –°–æ–∑–¥–∞—Ç—å —Ö—É–∫ `useAnalytics` –≤ `frontend/src/hooks/useAnalytics.js`
- –•—É–∫ –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ `telegramAnalytics` –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º
- –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `telegramAnalytics` –∏–∑ `index.js` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
- –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ (try-catch) –¥–ª—è –≤—Å–µ—Ö –≤—ã–∑–æ–≤–æ–≤ trackEvent

#### –¢–µ–∫—É—â–∞—è –æ—à–∏–±–∫–∞:
- –í `index.js` Analytics –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è, –Ω–æ –Ω–∏–≥–¥–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ç—Ä–µ–∫–∏–Ω–≥–∞
- –ù–µ—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ `trackEvent()` –≤ –∫–æ–¥–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

---

### 7. –û–ë–†–ê–ë–û–¢–ö–ê –°–û–ë–´–¢–ò–ô VIEWPORT –ò THEME

#### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ viewport
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–µ–º—ã (–µ—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è) –¥–æ–ª–∂–µ–Ω –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è UI
- –°–æ–±—ã—Ç–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–¥–ø–∏—Å–∞–Ω—ã –∏ –æ—Ç–ø–∏—Å–∞–Ω—ã

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:
- –í —Ö—É–∫–µ `useTelegramWebApp` –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è:
  - `viewportChanged` - –æ–±–Ω–æ–≤–ª—è—Ç—å CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤—ã—Å–æ—Ç—ã
  - –í –±—É–¥—É—â–µ–º: `themeChanged` - –µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–º
- –û—á–∏—â–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏ –≤ cleanup —Ñ—É–Ω–∫—Ü–∏–∏ useEffect

#### –¢–µ–∫—É—â–∞—è –æ—à–∏–±–∫–∞:
- –ù–µ—Ç –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Å–æ–±—ã—Ç–∏—è Telegram WebApp API
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ viewport (–æ—Ç–∫—Ä—ã—Ç–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã) –º–æ–∂–µ—Ç –Ω–∞—Ä—É—à–∞—Ç—å layout

---

## üìù –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### –≠—Ç–∞–ø 1: –ë–∞–∑–æ–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è WebApp API
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô

**–ó–∞–¥–∞—á–∏:**
1. –°–æ–∑–¥–∞—Ç—å —Ö—É–∫ `useTelegramWebApp.js`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è `window.Telegram.WebApp`
   - –í—ã–∑–æ–≤ `WebApp.ready()` –∏ `WebApp.expand()`
   - –í–æ–∑–≤—Ä–∞—Ç –æ–±—ä–µ–∫—Ç–∞ WebApp –∏ —Å—Ç–∞—Ç—É—Å–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
   - Fallback –¥–ª—è —Å–ª—É—á–∞—è –∑–∞–ø—É—Å–∫–∞ –≤–Ω–µ Telegram

2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ö—É–∫ –≤ `App.js`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö—É–∫ –≤ –∫–æ—Ä–Ω–µ–≤–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
   - –û–∂–∏–¥–∞—Ç—å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ WebApp –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç Telegram WebApp API –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ.

---

### –≠—Ç–∞–ø 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è MainButton
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô

**–ó–∞–¥–∞—á–∏:**
1. –°–æ–∑–¥–∞—Ç—å —Ö—É–∫ `useMainButton.js`
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–º, –≤–∏–¥–∏–º–æ—Å—Ç—å—é –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ MainButton
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ –∫–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
   - **SubscriptionForm.js**: –ó–∞–º–µ–Ω–∏—Ç—å –∫–Ω–æ–ø–∫—É "Pay for Subscription" –Ω–∞ MainButton
   - **TaskForm.js**: –ó–∞–º–µ–Ω–∏—Ç—å –∫–Ω–æ–ø–∫—É "Save" –Ω–∞ MainButton
   - **PointsWidget.js**: –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å MainButton "COLLECT" –∫–æ–≥–¥–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª–Ω—ã–π

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –û—Å–Ω–æ–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ Telegram MainButton, —É–ª—É—á—à–∞—è UX.

---

### –≠—Ç–∞–ø 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è BackButton
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô

**–ó–∞–¥–∞—á–∏:**
1. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É BackButton –≤ `Dashboard.js`
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å BackButton –ø—Ä–∏ `currentTask !== null` –∏–ª–∏ `onSubscription === true`
   - –ü—Ä–∏ –∫–ª–∏–∫–µ: –∑–∞–∫—Ä—ã–≤–∞—Ç—å —Ñ–æ—Ä–º—É/–∑–∞–¥–∞—á—É –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
   - –°–∫—Ä—ã–≤–∞—Ç—å BackButton –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥" Telegram –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.

---

### –≠—Ç–∞–ø 4: –û–±—Ä–∞–±–æ—Ç–∫–∞ Viewport
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô

**–ó–∞–¥–∞—á–∏:**
1. –†–∞—Å—à–∏—Ä–∏—Ç—å —Ö—É–∫ `useTelegramWebApp`
   - –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏–µ `viewportChanged`
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `--tg-viewport-height`
   - –û–±–Ω–æ–≤–ª—è—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞

2. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∏–ª–∏ –≤ `App.js`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤–º–µ—Å—Ç–æ `100vh`
   - –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–æ–¥ —Ä–µ–∞–ª—å–Ω—É—é –≤—ã—Å–æ—Ç—É Telegram viewport

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏.

---

### –≠—Ç–∞–ø 5: Safe Area Insets
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

**–ó–∞–¥–∞—á–∏:**
1. –†–∞—Å—à–∏—Ä–∏—Ç—å —Ö—É–∫ `useTelegramWebApp`
   - –ü–æ–ª—É—á–∞—Ç—å `WebApp.safeAreaInsets`
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `--tg-safe-area-top` –∏ `--tg-safe-area-bottom`

2. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
   - **Header.js**: –î–æ–±–∞–≤–∏—Ç—å padding-top —Å —É—á–µ—Ç–æ–º safe area
   - **Footer.js**: –î–æ–±–∞–≤–∏—Ç—å padding-bottom —Å —É—á–µ—Ç–æ–º safe area

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö —Å –≤—ã—Ä–µ–∑–∞–º–∏.

---

### –≠—Ç–∞–ø 6: –¢—Ä–µ–∫–∏–Ω–≥ —Å–æ–±—ã—Ç–∏–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô

**–ó–∞–¥–∞—á–∏:**
1. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `telegramAnalytics` –∏–∑ `index.js`

2. –°–æ–∑–¥–∞—Ç—å —Ö—É–∫ `useAnalytics.js`
   - –§—É–Ω–∫—Ü–∏—è `trackEvent(eventName, params)`
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —á–µ—Ä–µ–∑ try-catch

3. –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ–∫–∏–Ω–≥ –≤ –∫–ª—é—á–µ–≤—ã–µ –º–µ—Å—Ç–∞:
   - **App.js / Dashboard.js**: `app_opened` –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
   - **useTonConnect.js**: `wallet_connected` –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
   - **SubscriptionForm.js**: `subscription_purchase_started` –∏ `subscription_purchase_completed`
   - **TaskForm.js**: `task_created` –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
   - **Dashboard.js**: `task_deleted` –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏
   - **PointsWidget.js**: `tokens_claimed` –ø—Ä–∏ —Å–±–æ—Ä–µ —Ç–æ–∫–µ–Ω–æ–≤

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –∫–ª—é—á–µ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è –≤ Telegram Analytics.

---

## üîç –ü–†–û–í–ï–†–ö–ê –ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –ø–æ–¥–∞—á–µ–π –∑–∞—è–≤–∫–∏:

- [ ] WebApp API –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ (`WebApp.ready()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è)
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω (`WebApp.expand()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è)
- [ ] MainButton –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π (–ø–æ–¥–ø–∏—Å–∫–∞, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏, —Å–±–æ—Ä —Ç–æ–∫–µ–Ω–æ–≤)
- [ ] BackButton —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (–ø–æ—è–≤–ª—è–µ—Ç—Å—è/—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –Ω—É–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã)
- [ ] Viewport –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (–≤—ã—Å–æ—Ç–∞ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ Telegram)
- [ ] Safe area —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è (–∫–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏)
- [ ] –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Telegram Mini App (–ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤–Ω—É—Ç—Ä–∏ Telegram)
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–º–µ–µ—Ç fallback –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤–Ω–µ Telegram (–Ω–µ –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π)

### –°–ø–æ—Å–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∫–∏:

1. **Telegram Analytics —Å—Ç–∞—Ç—É—Å:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –±–æ—Ç–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–æ–±—ã—Ç–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

2. **Telegram WebApp API:**
   - –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram Desktop/Mobile
   - –í–∫–ª—é—á–∏—Ç—å "Enable webview inspecting" –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Telegram
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ DevTools –∫–æ–Ω—Å–æ–ª–∏ –Ω–∞–ª–∏—á–∏–µ –æ–±—ä–µ–∫—Ç–∞ `window.Telegram.WebApp`
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –º–µ—Ç–æ–¥—ã –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

3. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è —Å MainButton
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é —Å BackButton
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ viewport (–æ—Ç–∫—Ä—ã—Ç–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã)

---

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è `window.Telegram.WebApp` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
- –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –≤–Ω–µ Telegram (fallback –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω)
- –í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—á–∏—â–µ–Ω—ã (prevent memory leaks)

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è WebApp –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –±—ã—Å—Ç—Ä–æ–π
- CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –±–µ–∑ –ª–∏—à–Ω–∏—Ö —Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–≤
- –ü–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Å–æ–±—ã—Ç–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º–∏

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:
- –ö–æ–¥ –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –≤ Telegram Desktop, Telegram Mobile (iOS/Android)
- –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏–π Telegram WebApp SDK
- Fallback –¥–æ–ª–∂–µ–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –≤–Ω–µ Telegram

---

## üìö –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –†–ï–°–£–†–°–´

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- [Telegram Mini Apps Documentation](https://core.telegram.org/bots/webapps)
- [Telegram Analytics SDK](https://docs.tganalytics.xyz)
- [Telegram App Standards and Best Practices](https://ton-org.notion.site/Telegram-App-Standards-and-Best-Practices-Guide-for-TON-teams-6ba3e413137e41c5b0be901d5e8c6790)

### –¢–µ–∫—É—â–∏–µ –≤–µ—Ä—Å–∏–∏ SDK:
- `@telegram-apps/analytics`: 1.3.13 (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
- Telegram WebApp SDK: –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ CDN –≤ `index.html` (–≤–µ—Ä—Å–∏—è ?56)

---

## üìÖ –ü–†–ò–û–†–ò–¢–ï–¢–´ –í–´–ü–û–õ–ù–ï–ù–ò–Ø

1. **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –æ–¥–æ–±—Ä–µ–Ω–∏—è):
   - ‚úÖ –≠—Ç–∞–ø 1: –ë–∞–∑–æ–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è WebApp API
   - ‚úÖ –≠—Ç–∞–ø 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è MainButton
   - ‚úÖ –≠—Ç–∞–ø 6: –¢—Ä–µ–∫–∏–Ω–≥ —Å–æ–±—ã—Ç–∏–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

2. **–í–´–°–û–ö–ò–ô –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
   - ‚úÖ –≠—Ç–∞–ø 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è BackButton
   - ‚úÖ –≠—Ç–∞–ø 4: –û–±—Ä–∞–±–æ—Ç–∫–∞ Viewport

3. **–°–†–ï–î–ù–ò–ô –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç** (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ):
   - ‚úÖ –≠—Ç–∞–ø 5: Safe Area Insets

---

## ‚úÖ –°–¢–ê–¢–£–° –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### –ó–∞–≤–µ—Ä—à–µ–Ω–æ:

**–≠—Ç–∞–ø 1: –ë–∞–∑–æ–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è WebApp API**
- ‚úÖ –°–æ–∑–¥–∞–Ω —Ö—É–∫ `useTelegramWebApp.js` —Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π `WebApp.ready()` –∏ `WebApp.expand()`
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `App.js` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π viewport –∏ safe area insets
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω fallback –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤–Ω–µ Telegram

**–≠—Ç–∞–ø 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è MainButton**
- ‚úÖ –°–æ–∑–¥–∞–Ω —Ö—É–∫ `useMainButton.js` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è MainButton
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `SubscriptionForm.js` –¥–ª—è –æ–ø–ª–∞—Ç—ã –ø–æ–¥–ø–∏—Å–∫–∏
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `TaskForm.js` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `PointsWidget.js` –¥–ª—è —Å–±–æ—Ä–∞ —Ç–æ–∫–µ–Ω–æ–≤

**–≠—Ç–∞–ø 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è BackButton**
- ‚úÖ –°–æ–∑–¥–∞–Ω —Ö—É–∫ `useBackButton.js` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è BackButton
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `Dashboard.js` —Å –ª–æ–≥–∏–∫–æ–π –∑–∞–∫—Ä—ã—Ç–∏—è —Ñ–æ—Ä–º

**–≠—Ç–∞–ø 4: –û–±—Ä–∞–±–æ—Ç–∫–∞ Viewport**
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `useTelegramWebApp.js` —Å –ø–æ–¥–ø–∏—Å–∫–æ–π –Ω–∞ —Å–æ–±—ã—Ç–∏–µ `viewportChanged`
- ‚úÖ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `--tg-viewport-height` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ `App.js` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç viewportHeight –≤–º–µ—Å—Ç–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ `100vh`

**–≠—Ç–∞–ø 5: Safe Area Insets**
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `useTelegramWebApp.js` —Å –ø–æ–ª—É—á–µ–Ω–∏–µ–º `WebApp.safeAreaInsets`
- ‚úÖ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `--tg-safe-area-top` –∏ `--tg-safe-area-bottom` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è
- ‚úÖ `App.js` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç safeAreaInsets –¥–ª—è padding

**–≠—Ç–∞–ø 6: –¢—Ä–µ–∫–∏–Ω–≥ —Å–æ–±—ã—Ç–∏–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏**
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω `telegramAnalytics` –∏–∑ `index.js`
- ‚úÖ –°–æ–∑–¥–∞–Ω —Ö—É–∫ `useAnalytics.js` –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ —Ç—Ä–µ–∫–∏–Ω–≥–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–æ–±—ã—Ç–∏—è:
  - ‚úÖ `app_opened` - –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Dashboard.js)
  - ‚úÖ `wallet_connected` - –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫–æ—à–µ–ª—å–∫–∞ (useTonConnect.js)
  - ‚úÖ `subscription_purchase_started` - –ø—Ä–∏ –Ω–∞—á–∞–ª–µ –ø–æ–∫—É–ø–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏ (SubscriptionForm.js)
  - ‚úÖ `subscription_purchase_completed` - –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –ø–æ–∫—É–ø–∫–µ –ø–æ–¥–ø–∏—Å–∫–∏ (SubscriptionForm.js)
  - ‚úÖ `task_created` - –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–¥–∞—á–∏ (TaskForm.js)
  - ‚úÖ `task_deleted` - –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏ (Dashboard.js)
  - ‚úÖ `tokens_claimed` - –ø—Ä–∏ —Å–±–æ—Ä–µ —Ç–æ–∫–µ–Ω–æ–≤ (PointsWidget.js)

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- ‚úÖ `frontend/src/hooks/useTelegramWebApp.js`
- ‚úÖ `frontend/src/hooks/useMainButton.js`
- ‚úÖ `frontend/src/hooks/useBackButton.js`
- ‚úÖ `frontend/src/hooks/useAnalytics.js`

### –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- ‚úÖ `frontend/src/index.js` - —ç–∫—Å–ø–æ—Ä—Ç telegramAnalytics
- ‚úÖ `frontend/src/App.js` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è useTelegramWebApp, viewport, safe area
- ‚úÖ `frontend/src/pages/Dashboard.js` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è BackButton –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- ‚úÖ `frontend/src/components/SubscriptionForm.js` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è MainButton –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- ‚úÖ `frontend/src/components/TaskForm.js` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è MainButton –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- ‚úÖ `frontend/src/components/PointsWidget.js` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è MainButton –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- ‚úÖ `frontend/src/hooks/useTonConnect.js` - —Ç—Ä–µ–∫–∏–Ω–≥ wallet_connected

---

**–°—Ç–∞—Ç—É—Å –ø–ª–∞–Ω–∞:** ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2024

