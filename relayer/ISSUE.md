# Relayer Service - –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

## –ó–∞–¥–∞—á–∞

Relayer –ø–æ–ª—É—á–∞–µ—Ç TON –æ—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∏ –¥–æ–ª–∂–µ–Ω:
1. –û–±–º–µ–Ω—è—Ç—å TON –Ω–∞ jetton —á–µ—Ä–µ–∑ STON.fi
2. –°–∂–µ—á—å jetton'—ã –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å callback –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É
3. –ü—Ä–∏ –æ—à–∏–±–∫–µ - –≤–µ—Ä–Ω—É—Ç—å TON –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (refund)

## ‚úÖ –†–ï–®–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### –ö–æ—à–µ–ª–µ–∫ V5R1 - –†–ï–®–ï–ù–û ‚úÖ
- ‚úÖ **seqno: 4** (–±—ã–ª–æ 0)
- ‚úÖ **balance: 683828926 nanotons** (–±—ã–ª–æ 0) 
- ‚úÖ **Transaction sent successfully** (–±—ã–ª–æ Failed to unpack account state)
- ‚úÖ **Refund –ø—Ä–æ—à–µ–ª —É—Å–ø–µ—à–Ω–æ!** üéâ

### Pool lookup - –†–ï–®–ï–ù–û ‚úÖ
- ‚úÖ **Pool address –Ω–∞–π–¥–µ–Ω:** `EQARa0ANmuCvqlb-sm5ImaAslSa9nWhTBi6g1hig0dqlFz88`
- ‚úÖ **Router –º–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç:** `getPoolAddress` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∞–¥—Ä–µ—Å
- ‚úÖ **Address parsing –∏—Å–ø—Ä–∞–≤–ª–µ–Ω:** –¥–æ–±–∞–≤–ª–µ–Ω `.toString()` –ø–µ—Ä–µ–¥ `Address.parse()`

## üîç –ê–ö–¢–£–ê–õ–¨–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ1: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å –ø—É–ª–∞

**Router –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `EQARa0ANmuCvqlb-sm5ImaAslSa9nWhTBi6g1hig0dqlFz88`
**–†–∞–±–æ—á–∏–π –ø—É–ª:** `EQCJKn-99vd6GEUKTkVEyFwmha33lxtb2oo-eMsU0tFGIZbf`

**–û–±–Ω–∞—Ä—É–∂–µ–Ω –∞–∫—Ç–∏–≤–Ω—ã–π –ø—É–ª RUBLE-pTON:**
- **–ê–¥—Ä–µ—Å –ø—É–ª–∞:** [EQCJKn-99vd6GEUKTkVEyFwmha33lxtb2oo-eMsU0tFGIZbf](https://tonviewer.com/EQCJKn-99vd6GEUKTkVEyFwmha33lxtb2oo-eMsU0tFGIZbf)
- **–¢–∏–ø:** `jetton_master, stonfi_pool_v2` ‚úÖ
- **–°—Ç–∞—Ç—É—Å:** `Active` ‚úÖ
- **–ü–∞—Ä–∞:** `RUBLE-pTON` ‚úÖ
- **–õ–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å:** `Max.supply: 69,047.09 RUBLE-pTON LP`
- **–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:** 01 Oct, 30 Sep, 22 Sep (–∞–∫—Ç–∏–≤–µ–Ω!)

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. Router –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç LP Token –∞–¥—Ä–µ—Å –≤–º–µ—Å—Ç–æ –∞–¥—Ä–µ—Å–∞ –ø—É–ª–∞
2. –ù—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –º–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–¥—Ä–µ—Å–∞ –ø—É–ª–∞
3. –í–æ–∑–º–æ–∂–Ω–æ, –Ω—É–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å LP Token –∞–¥—Ä–µ—Å–æ–º

### –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ2: BigInt serialization (–†–ï–®–ï–ù–û ‚úÖ)

**–õ–æ–≥ –æ—à–∏–±–∫–∏:**
```
ERROR [SwapService] [DEBUG] Pool lookup failed: Do not know how to serialize a BigInt
ERROR [SwapService] TypeError: Do not know how to serialize a BigInt
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** ‚úÖ –£–±—Ä–∞–Ω–æ `JSON.stringify(pool)`, –¥–æ–±–∞–≤–ª–µ–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏** - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç router
2. **–°—Ä–∞–≤–Ω–∏—Ç—å –∞–¥—Ä–µ—Å–∞** - router vs –∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ä–∞–±–æ—á–∏–π –ø—É–ª
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—É–ª–∞** - —Ä–µ–∑–µ—Ä–≤—ã, –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å
4. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –ø—É–ª–∞** –µ—Å–ª–∏ –Ω—É–∂–Ω–æ